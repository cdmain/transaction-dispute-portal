# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
# Multi-Environment Deployment Pipeline
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
#
# DEPLOYMENT STRATEGY:
# ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
# ‚îÇ  Branch: dev                                                                 ‚îÇ
# ‚îÇ  ‚îî‚îÄ‚îÄ Push ‚Üí Runs CI tests only (no deployment)                              ‚îÇ
# ‚îÇ                                                                              ‚îÇ
# ‚îÇ  Branch: main (production tracking for rollbacks)                            ‚îÇ
# ‚îÇ  ‚îî‚îÄ‚îÄ Push ‚Üí Builds and deploys ALL environments to GitHub Pages             ‚îÇ
# ‚îÇ                                                                              ‚îÇ
# ‚îÇ  FLOW: dev ‚Üí PR ‚Üí main ‚Üí Deploy ALL environments                             ‚îÇ
# ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
#
# ENVIRONMENTS (all deployed together as subfolders):
# ‚Ä¢ DEV  - /dev/   - Latest development features
# ‚Ä¢ INT  - /int/   - Integration testing  
# ‚Ä¢ QA   - /qa/    - Pre-release testing
# ‚Ä¢ PROD - /prod/  - Stable production
#
# URLS:
# ‚Ä¢ Landing: https://cdmain.github.io/transaction-dispute-portal/
# ‚Ä¢ DEV:     https://cdmain.github.io/transaction-dispute-portal/dev/
# ‚Ä¢ INT:     https://cdmain.github.io/transaction-dispute-portal/int/
# ‚Ä¢ QA:      https://cdmain.github.io/transaction-dispute-portal/qa/
# ‚Ä¢ PROD:    https://cdmain.github.io/transaction-dispute-portal/prod/
#
# ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê

name: Deploy

on:
  push:
    branches: [main]
  workflow_dispatch:
    inputs:
      force_deploy:
        description: 'Force deployment'
        required: false
        type: boolean
        default: true

permissions:
  contents: read
  pages: write
  id-token: write

concurrency:
  group: "pages"
  cancel-in-progress: false

env:
  BUN_VERSION: 'latest'

jobs:
  # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  # Build ALL Environments (combined into single artifact)
  # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  build:
    name: üî® Build All Environments
    runs-on: ubuntu-latest
    outputs:
      version: ${{ steps.version.outputs.version }}
      branch: ${{ steps.branch.outputs.branch }}

    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Determine Branch
        id: branch
        run: |
          BRANCH=${GITHUB_REF#refs/heads/}
          echo "branch=$BRANCH" >> $GITHUB_OUTPUT
          echo "üåø Branch: $BRANCH"

      - name: Get Version
        id: version
        run: |
          VERSION=$(cat VERSION 2>/dev/null || echo "1.0.0")
          COMMIT_SHORT=$(git rev-parse --short HEAD)
          TIMESTAMP=$(date +%Y%m%d-%H%M)
          echo "version=${VERSION}-${COMMIT_SHORT}" >> $GITHUB_OUTPUT
          echo "full_version=${VERSION}-${COMMIT_SHORT}-${TIMESTAMP}" >> $GITHUB_OUTPUT
          echo "üì¶ Version: ${VERSION}-${COMMIT_SHORT}"

      - name: Setup Bun
        uses: oven-sh/setup-bun@v1
        with:
          bun-version: ${{ env.BUN_VERSION }}

      - name: Install dependencies
        working-directory: frontend
        run: bun install --frozen-lockfile || bun install

      # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      # Build each environment with different configurations
      # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      
      - name: üü¢ Build DEV Environment
        working-directory: frontend
        run: bun run build
        env:
          VITE_DEMO_MODE: 'true'
          VITE_ENVIRONMENT: 'dev'
          VITE_APP_VERSION: ${{ steps.version.outputs.version }}-dev

      - name: Move DEV build
        run: |
          mkdir -p dist/dev
          cp -r frontend/dist/* dist/dev/

      - name: üîµ Build INT Environment
        working-directory: frontend
        run: bun run build
        env:
          VITE_DEMO_MODE: 'true'
          VITE_ENVIRONMENT: 'int'
          VITE_APP_VERSION: ${{ steps.version.outputs.version }}-int

      - name: Move INT build
        run: |
          mkdir -p dist/int
          cp -r frontend/dist/* dist/int/

      - name: üü° Build QA Environment
        working-directory: frontend
        run: bun run build
        env:
          VITE_DEMO_MODE: 'true'
          VITE_ENVIRONMENT: 'qa'
          VITE_APP_VERSION: ${{ steps.version.outputs.version }}-qa

      - name: Move QA build
        run: |
          mkdir -p dist/qa
          cp -r frontend/dist/* dist/qa/

      - name: üî¥ Build PROD Environment
        working-directory: frontend
        run: bun run build
        env:
          VITE_DEMO_MODE: 'true'
          VITE_ENVIRONMENT: 'prod'
          VITE_APP_VERSION: ${{ steps.version.outputs.version }}

      - name: Move PROD build
        run: |
          mkdir -p dist/prod
          cp -r frontend/dist/* dist/prod/

      # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      # Create environment selector landing page
      # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      
      - name: Create Landing Page
        run: |
          cat > dist/index.html << 'EOF'
          <!DOCTYPE html>
          <html lang="en">
          <head>
            <meta charset="UTF-8">
            <meta name="viewport" content="width=device-width, initial-scale=1.0">
            <title>Transaction Dispute Portal - Environments</title>
            <style>
              * { margin: 0; padding: 0; box-sizing: border-box; }
              body { 
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
                background: linear-gradient(135deg, #1e3a5f 0%, #0f2840 100%); 
                min-height: 100vh; 
                display: flex; 
                align-items: center; 
                justify-content: center;
                padding: 2rem;
              }
              .container { text-align: center; color: white; max-width: 900px; width: 100%; }
              .logo { font-size: 4rem; margin-bottom: 1rem; }
              h1 { font-size: 2.5rem; margin-bottom: 0.5rem; font-weight: 700; }
              .subtitle { opacity: 0.8; margin-bottom: 2.5rem; font-size: 1.1rem; }
              .environments { 
                display: grid; 
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); 
                gap: 1.25rem; 
                margin-bottom: 2rem;
              }
              .env-card { 
                background: rgba(255,255,255,0.08); 
                backdrop-filter: blur(10px); 
                border-radius: 16px; 
                padding: 2rem 1.5rem; 
                text-decoration: none; 
                color: white; 
                transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); 
                border: 1px solid rgba(255,255,255,0.1);
                position: relative;
                overflow: hidden;
              }
              .env-card::before {
                content: '';
                position: absolute;
                top: 0;
                left: 0;
                right: 0;
                height: 4px;
              }
              .env-card.dev::before { background: #22c55e; }
              .env-card.int::before { background: #3b82f6; }
              .env-card.qa::before { background: #f59e0b; }
              .env-card.prod::before { background: #ef4444; }
              .env-card:hover { 
                background: rgba(255,255,255,0.15); 
                transform: translateY(-4px);
                box-shadow: 0 20px 40px rgba(0,0,0,0.3);
              }
              .env-icon { font-size: 2rem; margin-bottom: 0.75rem; }
              .env-name { font-size: 1.25rem; font-weight: 600; margin-bottom: 0.25rem; }
              .env-desc { font-size: 0.875rem; opacity: 0.7; margin-bottom: 0.75rem; }
              .badge { 
                display: inline-block; 
                padding: 0.25rem 0.75rem; 
                border-radius: 20px; 
                font-size: 0.7rem; 
                font-weight: 600;
                letter-spacing: 0.5px;
              }
              .badge-dev { background: rgba(34, 197, 94, 0.2); border: 1px solid #22c55e; color: #22c55e; }
              .badge-int { background: rgba(59, 130, 246, 0.2); border: 1px solid #3b82f6; color: #3b82f6; }
              .badge-qa { background: rgba(245, 158, 11, 0.2); border: 1px solid #f59e0b; color: #f59e0b; }
              .badge-prod { background: rgba(239, 68, 68, 0.2); border: 1px solid #ef4444; color: #ef4444; }
              .info { 
                background: rgba(255,255,255,0.05); 
                border-radius: 12px; 
                padding: 1.5rem;
                margin-top: 1rem;
              }
              .info h3 { font-size: 1rem; margin-bottom: 0.75rem; opacity: 0.9; }
              .info p { font-size: 0.875rem; opacity: 0.7; line-height: 1.6; }
              .credentials { 
                background: rgba(34, 197, 94, 0.1); 
                border: 1px solid rgba(34, 197, 94, 0.3);
                border-radius: 8px; 
                padding: 1rem; 
                margin-top: 1rem;
                font-family: monospace;
              }
              .credentials code { color: #22c55e; }
              .footer { margin-top: 2rem; opacity: 0.5; font-size: 0.8rem; }
            </style>
          </head>
          <body>
            <div class="container">
              <div class="logo">üè¶</div>
              <h1>Transaction Dispute Portal</h1>
              <p class="subtitle">Multi-Environment Deployment Demo</p>
              
              <div class="environments">
                <a href="./dev/" class="env-card dev">
                  <div class="env-icon">üîß</div>
                  <div class="env-name">Development</div>
                  <div class="env-desc">Latest features & experiments</div>
                  <span class="badge badge-dev">DEV</span>
                </a>
                
                <a href="./int/" class="env-card int">
                  <div class="env-icon">üîó</div>
                  <div class="env-name">Integration</div>
                  <div class="env-desc">Integration testing</div>
                  <span class="badge badge-int">INT</span>
                </a>
                
                <a href="./qa/" class="env-card qa">
                  <div class="env-icon">üß™</div>
                  <div class="env-name">QA</div>
                  <div class="env-desc">Quality assurance testing</div>
                  <span class="badge badge-qa">QA</span>
                </a>
                
                <a href="./prod/" class="env-card prod">
                  <div class="env-icon">üöÄ</div>
                  <div class="env-name">Production</div>
                  <div class="env-desc">Stable release</div>
                  <span class="badge badge-prod">PROD</span>
                </a>
              </div>
              
              <div class="info">
                <h3>üîë Demo Credentials</h3>
                <div class="credentials">
                  <code>Email: demo@example.com</code><br>
                  <code>Password: Demo123!</code>
                </div>
                <p style="margin-top: 1rem;">
                  All environments run in demo mode with mock data. 
                  Each environment is isolated with its own configuration.
                </p>
              </div>
              
              <p class="footer">
                Built with .NET 8 + Vue 3 + TypeScript ‚Ä¢ Deployed via GitHub Actions
              </p>
            </div>
          </body>
          </html>
          EOF

      - name: Create .nojekyll
        run: touch dist/.nojekyll

      - name: Create 404 page
        run: cp dist/index.html dist/404.html

      # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      # Upload combined artifact (all environments together)
      # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
      
      - name: Upload Pages artifact
        uses: actions/upload-pages-artifact@v3
        with:
          path: dist/

      - name: Build Summary
        run: |
          echo "## üî® Build Complete" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**Branch:** ${{ steps.branch.outputs.branch }}" >> $GITHUB_STEP_SUMMARY
          echo "**Version:** ${{ steps.version.outputs.version }}" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### üì¶ Built Environments" >> $GITHUB_STEP_SUMMARY
          echo "| Environment | Path | Status |" >> $GITHUB_STEP_SUMMARY
          echo "|-------------|------|--------|" >> $GITHUB_STEP_SUMMARY
          echo "| DEV | /dev/ | ‚úÖ Built |" >> $GITHUB_STEP_SUMMARY
          echo "| INT | /int/ | ‚úÖ Built |" >> $GITHUB_STEP_SUMMARY
          echo "| QA | /qa/ | ‚úÖ Built |" >> $GITHUB_STEP_SUMMARY
          echo "| PROD | /prod/ | ‚úÖ Built |" >> $GITHUB_STEP_SUMMARY

  # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  # Deploy to GitHub Pages (single deployment with all environments)
  # ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  deploy:
    name: üöÄ Deploy to GitHub Pages
    needs: build
    runs-on: ubuntu-latest
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}

    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        uses: actions/deploy-pages@v4

      - name: Deployment Summary
        run: |
          echo "## üéâ Deployment Complete!" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "**Deployed from:** ${{ needs.build.outputs.branch }}" >> $GITHUB_STEP_SUMMARY
          echo "**Version:** ${{ needs.build.outputs.version }}" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### üåê Environment URLs" >> $GITHUB_STEP_SUMMARY
          echo "| Environment | URL | Source Branch |" >> $GITHUB_STEP_SUMMARY
          echo "|-------------|-----|---------------|" >> $GITHUB_STEP_SUMMARY
          echo "| Landing | https://cdmain.github.io/transaction-dispute-portal/ | - |" >> $GITHUB_STEP_SUMMARY
          echo "| DEV | https://cdmain.github.io/transaction-dispute-portal/dev/ | dev |" >> $GITHUB_STEP_SUMMARY
          echo "| INT | https://cdmain.github.io/transaction-dispute-portal/int/ | dev |" >> $GITHUB_STEP_SUMMARY
          echo "| QA | https://cdmain.github.io/transaction-dispute-portal/qa/ | main |" >> $GITHUB_STEP_SUMMARY
          echo "| PROD | https://cdmain.github.io/transaction-dispute-portal/prod/ | main |" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "### üîë Demo Credentials" >> $GITHUB_STEP_SUMMARY
          echo "\`\`\`" >> $GITHUB_STEP_SUMMARY
          echo "Email: demo@example.com" >> $GITHUB_STEP_SUMMARY
          echo "Password: Demo123!" >> $GITHUB_STEP_SUMMARY
          echo "\`\`\`" >> $GITHUB_STEP_SUMMARY
